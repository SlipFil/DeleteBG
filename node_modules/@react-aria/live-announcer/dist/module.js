import $9Q8De$react, {useState as $9Q8De$useState, useImperativeHandle as $9Q8De$useImperativeHandle, Fragment as $9Q8De$Fragment} from "react";
import $9Q8De$reactdom from "react-dom";
import {VisuallyHidden as $9Q8De$VisuallyHidden} from "@react-aria/visually-hidden";

function $parcel$export(e, n, v, s) {
  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});
}
var $319e236875307eab$exports = {};

$parcel$export($319e236875307eab$exports, "announce", () => $319e236875307eab$export$a9b970dcc4ae71a9);
$parcel$export($319e236875307eab$exports, "clearAnnouncer", () => $319e236875307eab$export$d10ae4f68404609a);
$parcel$export($319e236875307eab$exports, "destroyAnnouncer", () => $319e236875307eab$export$d8686216b8b81b2f);



/* Inspired by https://github.com/AlmeroSteyn/react-aria-live */ const $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY = 7000;
let $319e236875307eab$var$liveRegionAnnouncer = /*#__PURE__*/ $9Q8De$react.createRef();
let $319e236875307eab$var$node = null;
let $319e236875307eab$var$messageId = 0;
function $319e236875307eab$export$a9b970dcc4ae71a9(message, assertiveness = 'assertive', timeout = $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY) {
    $319e236875307eab$var$ensureInstance((announcer)=>announcer.announce(message, assertiveness, timeout)
    );
}
function $319e236875307eab$export$d10ae4f68404609a(assertiveness) {
    $319e236875307eab$var$ensureInstance((announcer)=>announcer.clear(assertiveness)
    );
}
function $319e236875307eab$export$d8686216b8b81b2f() {
    if ($319e236875307eab$var$liveRegionAnnouncer.current) {
        $9Q8De$reactdom.unmountComponentAtNode($319e236875307eab$var$node);
        document.body.removeChild($319e236875307eab$var$node);
        $319e236875307eab$var$node = null;
    }
}
/**
 * Ensures we only have one instance of the announcer so that we don't have elements competing.
 */ function $319e236875307eab$var$ensureInstance(callback) {
    if (!$319e236875307eab$var$liveRegionAnnouncer.current) {
        $319e236875307eab$var$node = document.createElement('div');
        $319e236875307eab$var$node.dataset.liveAnnouncer = 'true';
        document.body.prepend($319e236875307eab$var$node);
        $9Q8De$reactdom.render(/*#__PURE__*/ $9Q8De$react.createElement($319e236875307eab$var$LiveRegionAnnouncer, {
            ref: $319e236875307eab$var$liveRegionAnnouncer
        }), $319e236875307eab$var$node, ()=>callback($319e236875307eab$var$liveRegionAnnouncer.current)
        );
    } else callback($319e236875307eab$var$liveRegionAnnouncer.current);
}
const $319e236875307eab$var$LiveRegionAnnouncer = /*#__PURE__*/ $9Q8De$react.forwardRef((_, ref)=>{
    let [assertiveMessages, setAssertiveMessages] = $9Q8De$useState([]);
    let [politeMessages, setPoliteMessages] = $9Q8De$useState([]);
    let clear = (assertiveness)=>{
        if (!assertiveness || assertiveness === 'assertive') setAssertiveMessages([]);
        if (!assertiveness || assertiveness === 'polite') setPoliteMessages([]);
    };
    let $319e236875307eab$export$a9b970dcc4ae71a9 = (message1, assertiveness = 'assertive', timeout = $319e236875307eab$var$LIVEREGION_TIMEOUT_DELAY)=>{
        let id = $319e236875307eab$var$messageId++;
        if (assertiveness === 'assertive') setAssertiveMessages((messages)=>[
                ...messages,
                {
                    id: id,
                    text: message1
                }
            ]
        );
        else setPoliteMessages((messages)=>[
                ...messages,
                {
                    id: id,
                    text: message1
                }
            ]
        );
        if (message1 !== '') setTimeout(()=>{
            if (assertiveness === 'assertive') setAssertiveMessages((messages)=>messages.filter((message)=>message.id !== id
                )
            );
            else setPoliteMessages((messages)=>messages.filter((message)=>message.id !== id
                )
            );
        }, timeout);
    };
    $9Q8De$useImperativeHandle(ref, ()=>({
            announce: $319e236875307eab$export$a9b970dcc4ae71a9,
            clear: clear
        })
    );
    return(/*#__PURE__*/ $9Q8De$react.createElement($9Q8De$Fragment, null, /*#__PURE__*/ $9Q8De$react.createElement($319e236875307eab$var$MessageBlock, {
        "aria-live": "assertive"
    }, assertiveMessages.map((message)=>/*#__PURE__*/ $9Q8De$react.createElement("div", {
            key: message.id
        }, message.text)
    )), /*#__PURE__*/ $9Q8De$react.createElement($319e236875307eab$var$MessageBlock, {
        "aria-live": "polite"
    }, politeMessages.map((message)=>/*#__PURE__*/ $9Q8De$react.createElement("div", {
            key: message.id
        }, message.text)
    ))));
});
function $319e236875307eab$var$MessageBlock({ children: children , 'aria-live': ariaLive  }) {
    return(/*#__PURE__*/ $9Q8De$react.createElement($9Q8De$VisuallyHidden, {
        role: "log",
        "aria-live": ariaLive,
        "aria-relevant": "additions"
    }, children));
}




export {$319e236875307eab$export$a9b970dcc4ae71a9 as announce, $319e236875307eab$export$d10ae4f68404609a as clearAnnouncer, $319e236875307eab$export$d8686216b8b81b2f as destroyAnnouncer};
//# sourceMappingURL=module.js.map
